<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Acceso Admin</title>
    <link rel="stylesheet" href="../css/admin.css" />
    <link rel="stylesheet" href="../css/admin-forms.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <div class="container-login">
      <img src="../img/Logo 1x4 b&w.svg" alt="Logo ingemat" />
      <h2>Acceso al panel de administración</h2>
      <form id="login-form">
        <input
          type="password"
          id="password"
          placeholder="Contraseña"
          required
        />
        <button type="submit">Entrar</button>
      </form>
      <div id="msg"></div>
    </div>
    <script>
      document.getElementById("login-form").onsubmit = async function (e) {
        e.preventDefault();
        const pass = document.getElementById("password").value;
        const res = await fetch("/admin/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ password: pass }),
        });
        const data = await res.json();
        if (data.exito) {
          window.location.href = "/admin";
        } else {
          document.getElementById("msg").textContent = data.mensaje;
        }
      };
    </script>
  </body>
</html>
